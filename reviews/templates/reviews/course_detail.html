{% extends 'reviews/base.html' %}
{% block content %}
<div class="container-fluid">
    <div class="content-section">
        <h5 class="mr-3">{{ object.name }} ({{ object.code }})</h5>
        <p>{{ object.department }}</p>
        <xp>Instructors :
            {% for prof in course.instructor.all %}
            <a href="{% url 'prof-detail' prof.id %}">{{prof.name}}</a>,
            {% endfor %}
        </xp>
    </div>
</div>
<div class="border-top pt-1 content-section">
    <legend class="border-bottom mb-3">Reviews</legend>
    {% if user.is_authenticated %}
        <a class="btn btn-outline-info" href="{% url 'add-course-review' pk=object.pk %}">Add Review</a>
    {% else %}
        <p><a href="{% url 'login' %}">Login Here!</a> to leave a review</p>
    {% endif %}
    {% for review in object.course_reviews.all %}
    <div class="border-top pt-3 review">
        <div class="content-section">
            <div class="media">
                {% if review.anonymous %}
                    <div class="media-body">
                        <div class="date">{{ review.datetime }}</div>
                        <strong>Anonymous Rated {{ review.rating }}/10</strong>
                {% else %}
                    <img class="rounded-circle account-img" src="{{ review.author.profile.image.url }}">
                    <div class="media-body">
                        <div class="date">{{ review.datetime }}</div>
                        <strong>{{ review.author }} Rated {{ review.rating }}/10</strong>
                {% endif %}
                        <p>{{ review.body }}</p>
                    </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock content %}