{% extends 'reviews/base.html' %}
{% block content %}
<div class="row container-fluid content-section">
    <div class="col-md-2">
        <img src="{{ object.image.url }}" class="card-img">
    </div>
    <div class="col md-10">
        <h5 class="mr-3">{{ object.name }} ({{ object.position }})</h5>
        <p>Education : {{ object.education }}</p>
        <p>Department : {{ object.department }}</p>
        <p>Courses Taught :
            {% for course in object.course_set.all %}
            <a href="{% url 'course-detail' course.id %}">{{course.code}},</a>
            {% endfor %}
        </p>
        <p>{{ object.description }}</p>
        <p>Email : {{ object.email }}, Contact : {{ object.contact }}</p>
    </div>
</div>
<div class="border-top pt-1 content-section">
    <legend class="border-bottom mb-3">Reviews</legend>
    {% if user.is_authenticated %}
        <a class="btn btn-outline-info" href="{% url 'add-review' pk=object.pk %}">Add Review</a>
    {% else %}
        <p><a href="{% url 'login' %}">Login Here!</a> to leave a review</p>
    {% endif %}
    {% for review in object.reviews.all %}
    <div class="border-top pt-3 review">
        <div class="content-section">
            <div class="media">
                {% if review.anonymous %}
                <img class="rounded-circle account-img" src="DEFAULT_IMAGE">
                <div class="media-body">
                    <div class="date">{{ review.datetime }}</div>
                    <strong>Anonymous <p class="lead">Rated {{review.rating }}/10</p> </strong>
                    {% else %}
                    <img class="rounded-circle account-img" src="{{ review.author.profile.image.url }}">
                    <div class="media-body">
                        <div class="date">{{ review.datetime }}</div>
                        <strong>{{ review.author }} Rated {{review.rating }}/10</strong>
                        {% endif %}
                        <p>{{ review.body }}</p>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
{% endblock content %}